<div class="menu-wrapper">
    <div class="quppy-table">
        <div class="quppy-row">
            <span class="quppy-col">
                <div class="quppy-col-bottom">Меню</div>
            </span>
        </div>
    </div>
</div>
<mat-nav-list>
    <h3 mat-subheader>Аккаунт</h3>
    <mat-list-item disableRipple>
        <mat-icon mat-list-icon>account_circle</mat-icon>
        <h4 mat-line>{{_api?.user.email}}</h4>
    </mat-list-item>
    <a mat-list-item href="#" (click)="_api.logout()">
        <mat-icon mat-list-icon>exit_to_app</mat-icon>
        <h4 mat-line>Выйти</h4>
    </a>
    <mat-divider></mat-divider>
    <h3 mat-subheader>Действия</h3>
    <a mat-list-item href="#"
       (click)="save()"
       [ngStyle]="{ opacity: isChange ? 1 : .31 }"
       [disableRipple]="!isChange">
        <mat-icon mat-list-icon>save</mat-icon>
        <h4 mat-line>Сохранить</h4>
    </a>
    <a mat-list-item href="#"
       (click)="getFile()"
       [ngStyle]="{ opacity: isChange ? .3 : 1 }"
       [disableRipple]="isChange">
        <mat-icon mat-list-icon>cloud_download</mat-icon>
        <h4 mat-line>Выгрузить json</h4>
    </a>
    <a mat-list-item href="#"
       (click)="getFiles()"
       [ngStyle]="{ opacity: isChange ? .3 : 1 }"
       [disableRipple]="isChange">
        <mat-icon mat-list-icon>get_app</mat-icon>
        <h4 mat-line>Выгрузить все</h4>
    </a>
    <mat-divider></mat-divider>
    <h3 mat-subheader>Настройки</h3>
    <a mat-list-item
       [matMenuTriggerFor]="!isChange ? menuFolder : null"
       [ngStyle]="{ opacity: isChange ? .3 : 1 }"
       [disableRipple]="isChange">
        <mat-icon mat-list-icon>folder_open</mat-icon>
        <h4 mat-line>
            Раздел
            <span style="float: right">{{folder.title}}</span>
        </h4>
    </a>
    <a mat-list-item
       [matMenuTriggerFor]="!isChange ? menuLang : null"
       [ngStyle]="{ opacity: isChange ? .3 : 1 }"
       [disableRipple]="isChange">
        <mat-icon mat-list-icon>spellcheck</mat-icon>
        <h4 mat-line>
            Шаблон
            <span style="float: right">{{templateLang}}</span>
        </h4>
    </a>
</mat-nav-list>
<mat-menu #menuLang="matMenu" xPosition="after">
    <button mat-menu-item
            *ngFor="let locale of locales"
            (click)="qpLocale.emit(locale)"
            [disabled]="locale.value === templateLang">{{locale.title}}</button>
</mat-menu>
<mat-menu #menuFolder="matMenu" xPosition="after">
    <button mat-menu-item
            *ngFor="let fold of folders"
            (click)="changeFolder(fold)"
            [disabled]="fold.ref === folder.ref">{{fold.title}}</button>
</mat-menu>
